{"version":3,"sources":["webpack:///application.js","webpack:///./src/client/application.js","webpack:///./src/shared/operators.js","webpack:///./src/client/services.js","webpack:///./src/shared/observable-socket.js","webpack:///./src/client/stores/users.js","webpack:///./src/shared/validation/users.js","webpack:///./src/shared/validator.js","webpack:///./src/client/stores/chat.js","webpack:///./src/shared/validation/chat.js","webpack:///./src/client/components/player/player.js","webpack:///./src/client/lib/component.js","webpack:///./src/client/components/users/users.js","webpack:///./src/client/components/chat/chat.js","webpack:///./src/client/components/chat/list.js","webpack:///./src/client/components/chat/form.js","webpack:///./src/client/components/playlist/playlist.js","webpack:///./src/client/components/playlist/list.js","webpack:///./src/client/components/playlist/sort.js","webpack:///./src/client/components/playlist/toolbar.js","webpack:///./src/client/components/playlist/context-menu.js","webpack:///./src/client/components/playlist/chrome.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","1","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","_interopRequireDefault","_jquery","_jquery2","_services","services","server","emitAction$","username","password","subscribe","user","console","log","error","$html","usersStore","currentUser$","isLoggedIn","removeClass","addClass","socket","connect","3","_rxjs","Observable","safeSubscribe","next","complete","subscription","this","item","e","stack","unsubscribe","catchWrap","catch","of","352","362","defineProperty","value","chatStore","undefined","_socket","_socket2","_observableSocket","_users","_chat","autoConnect","ObservableSocket","UsersStore","ChatStore","407","_classCallCheck","instance","Constructor","TypeError","clientMessage","message","Error","fail","throw","success","successObservable","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","protoProps","staticProps","empty","_this","_state","_actionCallbacks","_requests","_nextRequestId","status$","merge","on$","map","isConnected","attempt","isReconnecting","publishReplay","refCount","state","get","event","fromEvent","callback","on","off","arg","emit","action","id","_registerCallbacks","subject","ReplaySubject","_this2","request","_popRequest","_this3","requestId","hasValue","_emitError","actions","onAction","408","opList","users","sort","l","r","name","localeCompare","type","opAdd","insertIndex","_lodash2","findIndex","u","splice","opRemove","index","_lodash","_server","defaultStore","events$","state$","scan","_ref","op","mapTo","startWith","_currentUser","login$","alert","validator","validateLogin","hasErrors","410","_validator","Validator","USERNAME_REGEX","test","411","_errors","join","push","isValid","errors","412","userStore","messages$","flatMap","list","from","first","arguments","validateSendMessage","currentUser","413","trim","includes","MESSAGE_TYPES","414","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_component","PlayerComponent","_ElementComponent","getPrototypeOf","$title","_$mount","find","text","$player","html","ElementComponent","component","attach","detach","415","ComponentBase","_get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getter","compSubscribe","_len","args","Array","_key","apply","_onDetachHandlers","$mount","children","_onAttach","_onDetach","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","handler","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","child","_ComponentBase","elementType","_$element","data","$element","appendTo","remove","className","isOn","416","418","UsersComponent","$name","css","color","$userElement","append","419","421","_list","_form","ChatComponent","ChatListComponent","form","ChatFormComponent","422","424","serverStatusFactory","statusMessage","status","_moment2","format","userActionFactory","_ref2","chatMessageFactory","_ref3","time","_moment","filter","m","$newElement","scrollTop","scrollHeight","542","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","isArray","_$error","_$input","attr","keyCode","do","preventDefault","withLatestFrom","_sendMessage$","_login$","response","show","hide","sendMessage$","val","_this4","finally","focus","543","_toolbar","_contextMenu","_chrome","PlaylistComponent","toolbar","PlaylistToolbarComponent","_$chrome","_$scrollArea","PlaylistListComponent","contextMenu","PlaylistContextMenuComponent","chrome","PlaylistChromeComponent","544","546","_sort","PlaylistSortComponent","547","548","549","550"],"mappings":"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","file":"application.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n\n/***/ 1:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(352);\n\t\n\tvar _services = __webpack_require__(362);\n\t\n\tvar services = _interopRequireWildcard(_services);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// --------------------------------------\n\t// PLAYGROUND\n\tservices.server.emitAction$(\"login\", { username: \"foo\", password: \"bar\" }).subscribe(function (user) {\n\t\tconsole.log(\"We're logged in: \" + user);\n\t}, function (error) {\n\t\tconsole.error(error);\n\t});\n\t// --------------------------------------\n\t// Auth\n\tvar $html = (0, _jquery2.default)(\"html\");\n\tservices.usersStore.currentUser$.subscribe(function (user) {\n\t\tif (user.isLoggedIn) {\n\t\t\t$html.removeClass(\"not-logged-in\");\n\t\t\t$html.addClass(\"logged-in\");\n\t\t} else {\n\t\t\t$html.addClass(\"not-logged-in\");\n\t\t\t$html.removeClass(\"logged-in\");\n\t\t}\n\t});\n\t\n\t// --------------------------------------\n\t// Components\n\t__webpack_require__(414);\n\t__webpack_require__(418);\n\t__webpack_require__(421);\n\t__webpack_require__(543);\n\t\n\t// --------------------------------------\n\t// Bootstrap\n\tservices.socket.connect();\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\t_rxjs.Observable.prototype.safeSubscribe = function (next, error, complete) {\n\t\tvar subscription = this.subscribe(function (item) {\n\t\t\ttry {\n\t\t\t\tnext(item);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e.stack || e);\n\t\t\t\tsubscription.unsubscribe();\n\t\t\t}\n\t\t}, error, complete);\n\t\n\t\treturn subscription;\n\t};\n\t\n\t_rxjs.Observable.prototype.catchWrap = function () {\n\t\treturn this.catch(function (error) {\n\t\t\treturn _rxjs.Observable.of({ error: error });\n\t\t});\n\t};\n\n/***/ }),\n\n/***/ 352:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 362:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.chatStore = exports.usersStore = exports.server = exports.socket = undefined;\n\t\n\tvar _socket = __webpack_require__(363);\n\t\n\tvar _socket2 = _interopRequireDefault(_socket);\n\t\n\tvar _observableSocket = __webpack_require__(407);\n\t\n\tvar _users = __webpack_require__(408);\n\t\n\tvar _chat = __webpack_require__(412);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar socket = exports.socket = (0, _socket2.default)({ autoConnect: false });\n\tvar server = exports.server = new _observableSocket.ObservableSocket(socket);\n\t\n\tvar usersStore = exports.usersStore = new _users.UsersStore(server);\n\tvar chatStore = exports.chatStore = new _chat.ChatStore(server, usersStore);\n\n/***/ }),\n\n/***/ 407:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ObservableSocket = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\texports.clientMessage = clientMessage;\n\texports.fail = fail;\n\texports.success = success;\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction clientMessage(message) {\n\t\tvar error = new Error(message);\n\t\terror.clientMessage = message;\n\t\treturn error;\n\t}\n\t\n\tfunction fail(message) {\n\t\treturn _rxjs.Observable.throw({ clientMessage: message });\n\t}\n\t\n\tvar successObservable = _rxjs.Observable.empty();\n\tfunction success() {\n\t\treturn successObservable;\n\t}\n\t\n\tvar ObservableSocket = exports.ObservableSocket = function () {\n\t\t_createClass(ObservableSocket, [{\n\t\t\tkey: \"isConnected\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._state.isConnected;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"isReconnecting\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._state.isReconnecting;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"isTotallyDead\",\n\t\t\tget: function get() {\n\t\t\t\treturn !this.isConnected && !this.isReconnecting;\n\t\t\t}\n\t\t}]);\n\t\n\t\tfunction ObservableSocket(socket) {\n\t\t\tvar _this = this;\n\t\n\t\t\t_classCallCheck(this, ObservableSocket);\n\t\n\t\t\tthis._socket = socket;\n\t\t\tthis._state = {};\n\t\t\tthis._actionCallbacks = {};\n\t\t\tthis._requests = {};\n\t\t\tthis._nextRequestId = 0;\n\t\n\t\t\t// socket.on(\"connect\", () => this._state = {isConnected: true});\n\t\t\t// socket.on(\"disconnect\", () => this._state = {isConnected: false});\n\t\t\tthis.status$ = _rxjs.Observable.merge(this.on$(\"connect\").map(function () {\n\t\t\t\treturn { isConnected: true };\n\t\t\t}), this.on$(\"disconnect\").map(function () {\n\t\t\t\treturn { isConnected: false };\n\t\t\t}), this.on$(\"reconnecting\").map(function (attempt) {\n\t\t\t\treturn { isConnected: false, isReconnecting: true, attempt: attempt };\n\t\t\t}), this.on$(\"reconnect_fail\").map(function () {\n\t\t\t\treturn { isConnected: false, isReconnecting: false };\n\t\t\t})).publishReplay(1).refCount();\n\t\n\t\t\tthis.status$.subscribe(function (state) {\n\t\t\t\treturn _this._state = state;\n\t\t\t});\n\t\t}\n\t\n\t\t// ---------------------\n\t\t// Basic Wrappers\n\t\n\t\n\t\t_createClass(ObservableSocket, [{\n\t\t\tkey: \"on$\",\n\t\t\tvalue: function on$(event) {\n\t\t\t\treturn _rxjs.Observable.fromEvent(this._socket, event);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"on\",\n\t\t\tvalue: function on(event, callback) {\n\t\t\t\tthis._socket.on(event, callback);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"off\",\n\t\t\tvalue: function off(event, callback) {\n\t\t\t\tthis._socket.off(event, callback);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"emit\",\n\t\t\tvalue: function emit(event, arg) {\n\t\t\t\tthis._socket.emit(event, arg);\n\t\t\t}\n\t\n\t\t\t// ---------------------\n\t\t\t// Emit (Client Side)\n\t\n\t\t}, {\n\t\t\tkey: \"emitAction$\",\n\t\t\tvalue: function emitAction$(action, arg) {\n\t\t\t\tvar id = this._nextRequestId++;\n\t\t\t\tthis._registerCallbacks(action);\n\t\n\t\t\t\tvar subject = this._requests[id] = new _rxjs.ReplaySubject(1);\n\t\t\t\tthis._socket.emit(action, arg, id);\n\t\t\t\treturn subject;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_registerCallbacks\",\n\t\t\tvalue: function _registerCallbacks(action) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tif (this._actionCallbacks.hasOwnProperty(action)) return;\n\t\n\t\t\t\tthis._socket.on(action, function (arg, id) {\n\t\t\t\t\tvar request = _this2._popRequest(id);\n\t\t\t\t\tif (!request) return;\n\t\n\t\t\t\t\trequest.next(arg);\n\t\t\t\t\trequest.complete();\n\t\t\t\t});\n\t\n\t\t\t\tthis._socket.on(action + \":fail\", function (arg, id) {\n\t\t\t\t\tvar request = _this2._popRequest(id);\n\t\t\t\t\tif (!request) return;\n\t\n\t\t\t\t\trequest.error(arg);\n\t\t\t\t});\n\t\n\t\t\t\tthis._actionCallbacks[action] = true;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_popRequest\",\n\t\t\tvalue: function _popRequest(id) {\n\t\t\t\tif (!this._requests.hasOwnProperty(id)) {\n\t\t\t\t\tconsole.error(\"Event with \" + id + \" was returned twice, or the server did not send back an ID\");\n\t\t\t\t}\n\t\n\t\t\t\tvar request = this._requests[id];\n\t\t\t\tdelete this._requests[id];\n\t\t\t\treturn request;\n\t\t\t}\n\t\n\t\t\t// ---------------------\n\t\t\t// On (Server Side)\n\t\n\t\t}, {\n\t\t\tkey: \"onAction\",\n\t\t\tvalue: function onAction(action, callback) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tthis._socket.on(action, function (arg, requestId) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar value = callback(arg);\n\t\t\t\t\t\tif (!value) {\n\t\t\t\t\t\t\t_this3._socket.emit(action, null, requestId);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tif (typeof value.subscribe !== \"function\") {\n\t\t\t\t\t\t\t_this3._socket.emit(action, value, requestId);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tvar hasValue = false;\n\t\t\t\t\t\tvalue.subscribe({\n\t\t\t\t\t\t\tnext: function next(item) {\n\t\t\t\t\t\t\t\tif (hasValue) throw new Error(\"Action \" + action + \" produced more than one value\");\n\t\n\t\t\t\t\t\t\t\t_this3._socket.emit(action, item, requestId);\n\t\t\t\t\t\t\t\thasValue = true;\n\t\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t\terror: function error(_error) {\n\t\t\t\t\t\t\t\t_this3._emitError(action, requestId, _error);\n\t\t\t\t\t\t\t\tconsole.error(_error.stack || _error);\n\t\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t\tcomplete: function complete() {\n\t\t\t\t\t\t\t\tif (!hasValue) _this3._socket.emit(action, null, requestId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tif (typeof requestId !== \"undefined\") _this3._emitError(action, requestId, error);\n\t\n\t\t\t\t\t\tconsole.error(error.stack || error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"onActions\",\n\t\t\tvalue: function onActions(actions) {\n\t\t\t\tfor (var action in actions) {\n\t\t\t\t\tif (!actions.hasOwnProperty(action)) continue;\n\t\n\t\t\t\t\tthis.onAction(action, actions[action]);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_emitError\",\n\t\t\tvalue: function _emitError(action, id, error) {\n\t\t\t\tvar message = error && error.clientMessage || \"Fatal Error\";\n\t\t\t\tthis._socket.emit(action + \":fail\", { message: message }, id);\n\t\t\t}\n\t\t}]);\n\n\t\treturn ObservableSocket;\n\t}();\n\n/***/ }),\n\n/***/ 408:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.UsersStore = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(409);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tvar _users = __webpack_require__(410);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar UsersStore = exports.UsersStore = function () {\n\t\t_createClass(UsersStore, [{\n\t\t\tkey: \"currentUser\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._currentUser;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"isLoggedIn\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._currentUser && this._currentUser.isLoggedIn;\n\t\t\t}\n\t\t}]);\n\t\n\t\tfunction UsersStore(server) {\n\t\t\tvar _this = this;\n\t\n\t\t\t_classCallCheck(this, UsersStore);\n\t\n\t\t\tthis._server = server;\n\t\n\t\t\t// Users List\n\t\t\tvar defaultStore = { users: [] };\n\t\t\tvar events$ = _rxjs.Observable.merge(this._server.on$(\"users:list\").map(opList), this._server.on$(\"users:added\").map(opAdd), this._server.on$(\"users:removed\").map(opRemove));\n\t\n\t\t\tthis.state$ = events$.scan(function (_ref, op) {\n\t\t\t\tvar state = _ref.state;\n\t\t\t\treturn op(state);\n\t\t\t}, { state: defaultStore }).publishReplay(1);\n\t\n\t\t\tthis.state$.connect();\n\t\n\t\t\t// Auth\n\t\t\tthis.currentUser$ = _rxjs.Observable.merge(this._server.on$(\"auth:login\"), this._server.on$(\"auth:logout\").mapTo({})).startWith({}).publishReplay(1).refCount();\n\t\n\t\t\tthis.currentUser$.subscribe(function (user) {\n\t\t\t\treturn _this._currentUser = user;\n\t\t\t});\n\t\n\t\t\t// Bootstrap\n\t\t\tthis._server.on(\"connect\", function () {\n\t\t\t\t_this._server.emit(\"users:list\");\n\t\n\t\t\t\tif (!_this.isLoggedIn) return;\n\t\n\t\t\t\t_this.login$(_this._currentUser.name).subscribe(function (user) {\n\t\t\t\t\treturn console.log(\"Logged in again as \" + user.name);\n\t\t\t\t}, function (error) {\n\t\t\t\t\treturn alert(\"Could not log back in \" + (error.message || \"Unknown Error\"));\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\n\t\t_createClass(UsersStore, [{\n\t\t\tkey: \"login$\",\n\t\t\tvalue: function login$(name) {\n\t\t\t\tvar validator = (0, _users.validateLogin)(name);\n\t\t\t\tif (validator.hasErrors) return _rxjs.Observable.throw({ message: validator.message });\n\t\n\t\t\t\treturn this._server.emitAction$(\"auth:login\", { name: name });\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"logout$\",\n\t\t\tvalue: function logout$() {\n\t\t\t\treturn this._server.emitAction$(\"auth:logout\");\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn UsersStore;\n\t}();\n\t\n\tfunction opList(users) {\n\t\treturn function (state) {\n\t\t\tstate.users = users;\n\t\t\tstate.users.sort(function (l, r) {\n\t\t\t\treturn l.name.localeCompare(r.name);\n\t\t\t});\n\t\t\treturn {\n\t\t\t\ttype: \"list\",\n\t\t\t\tstate: state\n\t\t\t};\n\t\t};\n\t}\n\t\n\tfunction opAdd(user) {\n\t\treturn function (state) {\n\t\t\tvar insertIndex = _lodash2.default.findIndex(state.users, function (u) {\n\t\t\t\treturn u.name.localeCompare(user.name) > 0;\n\t\t\t});\n\t\n\t\t\tif (insertIndex === 1) insertIndex = state.users.length;\n\t\n\t\t\tstate.users.splice(insertIndex, 0, user);\n\t\t\treturn {\n\t\t\t\ttype: \"add\",\n\t\t\t\tuser: user,\n\t\t\t\tstate: state\n\t\t\t};\n\t\t};\n\t}\n\t\n\tfunction opRemove(user) {\n\t\treturn function (state) {\n\t\t\tvar index = _lodash2.default.findIndex(state.users, { name: user.name });\n\t\t\tif (index !== -1) {\n\t\t\t\tstate.users.splice(index, 1);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttype: \"remove\",\n\t\t\t\tuser: user,\n\t\t\t\tstate: state\n\t\t\t};\n\t\t};\n\t}\n\n/***/ }),\n\n/***/ 410:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.USERNAME_REGEX = undefined;\n\texports.validateLogin = validateLogin;\n\t\n\tvar _validator = __webpack_require__(411);\n\t\n\tvar USERNAME_REGEX = exports.USERNAME_REGEX = /^[\\w\\d_-]+$/;\n\t\n\tfunction validateLogin(username) {\n\t\tvar validator = new _validator.Validator();\n\t\n\t\tif (username.length >= 10) validator.error(\"Username must be fewer than 10 characters\");\n\t\n\t\tif (!USERNAME_REGEX.test(username)) validator.error(\"Username can only contain numbers, digits, underscores and dashes\");\n\t\n\t\treturn validator;\n\t}\n\n/***/ }),\n\n/***/ 411:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.Validator = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Validator = exports.Validator = function () {\n\t\t_createClass(Validator, [{\n\t\t\tkey: \"isValid\",\n\t\t\tget: function get() {\n\t\t\t\treturn !this._errors.length;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"errors\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._errors;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"message\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._errors.join(\", \");\n\t\t\t}\n\t\t}]);\n\t\n\t\tfunction Validator() {\n\t\t\t_classCallCheck(this, Validator);\n\t\n\t\t\tthis._errors = [];\n\t\t}\n\t\n\t\t_createClass(Validator, [{\n\t\t\tkey: \"error\",\n\t\t\tvalue: function error(message) {\n\t\t\t\tthis._errors.push(message);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toObject\",\n\t\t\tvalue: function toObject() {\n\t\t\t\tif (this.isValid) return {};\n\t\n\t\t\t\treturn {\n\t\t\t\t\terrors: this._errors,\n\t\t\t\t\tmessage: this.message\n\t\t\t\t};\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"throw$\",\n\t\t\tvalue: function throw$() {\n\t\t\t\treturn _rxjs.Observable.throw({ clientMessage: this.message });\n\t\t\t}\n\t\t}]);\n\n\t\treturn Validator;\n\t}();\n\n/***/ }),\n\n/***/ 412:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ChatStore = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tvar _chat = __webpack_require__(413);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar ChatStore = exports.ChatStore = function () {\n\t\tfunction ChatStore(server, userStore) {\n\t\t\t_classCallCheck(this, ChatStore);\n\t\n\t\t\tthis._server = server;\n\t\t\tthis._users = userStore;\n\t\n\t\t\tthis.messages$ = _rxjs.Observable.merge(server.on$(\"chat:list\").flatMap(function (list) {\n\t\t\t\treturn _rxjs.Observable.from(list);\n\t\t\t}), server.on$(\"chat:added\")).publishReplay(100);\n\t\n\t\t\tthis.messages$.connect();\n\t\n\t\t\tserver.on$(\"connect\").first().subscribe(function () {\n\t\t\t\treturn server.emit(\"chat:list\");\n\t\t\t});\n\t\t}\n\t\n\t\t_createClass(ChatStore, [{\n\t\t\tkey: \"sendMessage$\",\n\t\t\tvalue: function sendMessage$(message) {\n\t\t\t\tvar type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"normal\";\n\t\n\t\t\t\tvar validator = (0, _chat.validateSendMessage)(this._users.currentUser, message, type);\n\t\t\t\tif (!validator.isValid) return _rxjs.Observable.throw({ message: validator.message });\n\t\n\t\t\t\treturn this._server.emitAction$(\"chat:add\", { message: message, type: type });\n\t\t\t}\n\t\t}]);\n\n\t\treturn ChatStore;\n\t}();\n\n/***/ }),\n\n/***/ 413:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.MESSAGE_TYPES = undefined;\n\texports.validateSendMessage = validateSendMessage;\n\t\n\tvar _lodash = __webpack_require__(409);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _validator = __webpack_require__(411);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar MESSAGE_TYPES = exports.MESSAGE_TYPES = [\"normal\"];\n\t\n\tfunction validateSendMessage(user, message, type) {\n\t\tvar validator = new _validator.Validator();\n\t\n\t\tif (message.length > 100) validator.error(\"Message must be smaller than 100 characters\");\n\t\n\t\tif (message.trim().length === 0) validator.error(\"Message cannot be empty\");\n\t\n\t\tif (!_lodash2.default.includes(MESSAGE_TYPES, type)) validator.error(\"Invalid message type \" + type);\n\t\n\t\treturn validator;\n\t}\n\n/***/ }),\n\n/***/ 414:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _component = __webpack_require__(415);\n\t\n\t__webpack_require__(416);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlayerComponent = function (_ElementComponent) {\n\t\t_inherits(PlayerComponent, _ElementComponent);\n\t\n\t\tfunction PlayerComponent() {\n\t\t\t_classCallCheck(this, PlayerComponent);\n\t\n\t\t\treturn _possibleConstructorReturn(this, (PlayerComponent.__proto__ || Object.getPrototypeOf(PlayerComponent)).call(this));\n\t\t}\n\t\n\t\t_createClass(PlayerComponent, [{\n\t\t\tkey: \"_onAttach\",\n\t\t\tvalue: function _onAttach() {\n\t\t\t\tvar $title = this._$mount.find(\"h1\");\n\t\t\t\t$title.text(\"Video player\");\n\t\n\t\t\t\tvar $player = this._$mount.find(\"div\");\n\t\t\t\t$player.html('<iframe src=\"https://www60.playercdn.net/86/0/aZiMpb4G-v4JxBZPkmPuSQ/1497124563/170514/997ddFakys8jLEK.mp4\" width=\"1000\" height=\"500\" frameborder=\"0\" allowfullscreen></iframe>');\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn PlayerComponent;\n\t}(_component.ElementComponent);\n\t\n\tvar component = void 0;\n\ttry {\n\t\tcomponent = new PlayerComponent();\n\t\tcomponent.attach((0, _jquery2.default)(\"section.player\"));\n\t} catch (e) {\n\t\tconsole.error(e);\n\t\tif (component) component.detach();\n\t} finally {\n\t\tif (false) {\n\t\t\tmodule.hot.accept();\n\t\t\tmodule.hot.dispose(function () {\n\t\t\t\treturn component && component.detach();\n\t\t\t});\n\t\t}\n\t}\n\n/***/ }),\n\n/***/ 415:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ElementComponent = exports.ComponentBase = undefined;\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t_rxjs.Observable.prototype.compSubscribe = function (component) {\n\t\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\t\targs[_key - 1] = arguments[_key];\n\t\t}\n\t\n\t\tvar subscription = this.safeSubscribe.apply(this, args);\n\t\tcomponent._onDetachHandlers.push(function () {\n\t\t\treturn subscription.unsubscribe();\n\t\t});\n\t\treturn subscription;\n\t};\n\t\n\tvar ComponentBase = exports.ComponentBase = function () {\n\t\tfunction ComponentBase() {\n\t\t\t_classCallCheck(this, ComponentBase);\n\t\t}\n\t\n\t\t_createClass(ComponentBase, [{\n\t\t\tkey: \"attach\",\n\t\t\tvalue: function attach($mount) {\n\t\t\t\tthis._$mount = $mount;\n\t\t\t\tthis._onDetachHandlers = [];\n\t\t\t\tthis.children = [];\n\t\t\t\tthis._onAttach();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"detach\",\n\t\t\tvalue: function detach() {\n\t\t\t\tthis._onDetach();\n\t\n\t\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\t\tvar _didIteratorError = false;\n\t\t\t\tvar _iteratorError = undefined;\n\t\n\t\t\t\ttry {\n\t\t\t\t\tfor (var _iterator = this._onDetachHandlers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\tvar handler = _step.value;\n\t\n\t\t\t\t\t\thandler();\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t_iteratorError = err;\n\t\t\t\t} finally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\t\tvar _didIteratorError2 = false;\n\t\t\t\tvar _iteratorError2 = undefined;\n\t\n\t\t\t\ttry {\n\t\t\t\t\tfor (var _iterator2 = this.children[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\t\tvar child = _step2.value;\n\t\n\t\t\t\t\t\tchild.detach();\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t\t_iteratorError2 = err;\n\t\t\t\t} finally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tthis._onDetachHandlers = [];\n\t\t\t\tthis.children = [];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_onAttach\",\n\t\t\tvalue: function _onAttach() {}\n\t\t}, {\n\t\t\tkey: \"_onDetach\",\n\t\t\tvalue: function _onDetach() {}\n\t\t}]);\n\t\n\t\treturn ComponentBase;\n\t}();\n\t\n\tvar ElementComponent = exports.ElementComponent = function (_ComponentBase) {\n\t\t_inherits(ElementComponent, _ComponentBase);\n\t\n\t\t_createClass(ElementComponent, [{\n\t\t\tkey: \"$element\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._$element;\n\t\t\t}\n\t\t}]);\n\t\n\t\tfunction ElementComponent() {\n\t\t\tvar elementType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"div\";\n\t\n\t\t\t_classCallCheck(this, ElementComponent);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (ElementComponent.__proto__ || Object.getPrototypeOf(ElementComponent)).call(this));\n\t\n\t\t\t_this._$element = (0, _jquery2.default)(\"<\" + elementType + \">\").data(\"component\", _this);\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(ElementComponent, [{\n\t\t\tkey: \"attach\",\n\t\t\tvalue: function attach($mount) {\n\t\t\t\t_get(ElementComponent.prototype.__proto__ || Object.getPrototypeOf(ElementComponent.prototype), \"attach\", this).call(this, $mount);\n\t\t\t\tthis.$element.appendTo(this._$mount);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"detach\",\n\t\t\tvalue: function detach() {\n\t\t\t\t_get(ElementComponent.prototype.__proto__ || Object.getPrototypeOf(ElementComponent.prototype), \"detach\", this).call(this);\n\t\t\t\tthis.$element.remove();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_setClass\",\n\t\t\tvalue: function _setClass(className, isOn) {\n\t\t\t\tif (isOn) this._$element.addClass(className);else this._$element.removeClass(className);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn ElementComponent;\n\t}(ComponentBase);\n\n/***/ }),\n\n/***/ 416:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 418:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _component = __webpack_require__(415);\n\t\n\tvar _services = __webpack_require__(362);\n\t\n\t__webpack_require__(419);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar UsersComponent = function (_ElementComponent) {\n\t\t_inherits(UsersComponent, _ElementComponent);\n\t\n\t\tfunction UsersComponent() {\n\t\t\t_classCallCheck(this, UsersComponent);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (UsersComponent.__proto__ || Object.getPrototypeOf(UsersComponent)).call(this, \"ul\"));\n\t\n\t\t\t_this.$element.addClass(\"users\");\n\t\t\t_this._users = _services.usersStore;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(UsersComponent, [{\n\t\t\tkey: \"_onAttach\",\n\t\t\tvalue: function _onAttach() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar $title = this._$mount.find(\"> h1\");\n\t\n\t\t\t\tthis._users.state$.map(function (action) {\n\t\t\t\t\treturn action.state.users;\n\t\t\t\t}).compSubscribe(this, function (users) {\n\t\t\t\t\t$title.text(users.length + \" user\" + (users.length != 1 ? \"s\" : \"\"));\n\t\n\t\t\t\t\t_this2.$element.empty();\n\t\t\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\t\t\tvar _didIteratorError = false;\n\t\t\t\t\tvar _iteratorError = undefined;\n\t\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor (var _iterator = users[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\t\tvar user = _step.value;\n\t\n\t\t\t\t\t\t\tvar $name = (0, _jquery2.default)(\"<span class=\\\"name\\\" />\").text(user.name).css(\"color\", user.color);\n\t\t\t\t\t\t\tvar $userElement = (0, _jquery2.default)(\"<li />\").append($name);\n\t\t\t\t\t\t\t_this2.$element.append($userElement);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t\t_iteratorError = err;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn UsersComponent;\n\t}(_component.ElementComponent);\n\t\n\tvar component = void 0;\n\ttry {\n\t\tcomponent = new UsersComponent(_services.usersStore);\n\t\tcomponent.attach((0, _jquery2.default)(\"section.users\"));\n\t} catch (e) {\n\t\tconsole.error(e);\n\t\tif (component) component.detach();\n\t} finally {\n\t\tif (false) {\n\t\t\tmodule.hot.accept();\n\t\t\tmodule.hot.dispose(function () {\n\t\t\t\treturn component && component.detach();\n\t\t\t});\n\t\t}\n\t}\n\n/***/ }),\n\n/***/ 419:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 421:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _component = __webpack_require__(415);\n\t\n\t__webpack_require__(422);\n\t\n\tvar _services = __webpack_require__(362);\n\t\n\tvar _list = __webpack_require__(424);\n\t\n\tvar _form = __webpack_require__(542);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar ChatComponent = function (_ComponentBase) {\n\t\t_inherits(ChatComponent, _ComponentBase);\n\t\n\t\tfunction ChatComponent(server, usersStore, chatStore) {\n\t\t\t_classCallCheck(this, ChatComponent);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (ChatComponent.__proto__ || Object.getPrototypeOf(ChatComponent)).call(this));\n\t\n\t\t\t_this._server = server;\n\t\t\t_this._users = usersStore;\n\t\t\t_this._chat = chatStore;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(ChatComponent, [{\n\t\t\tkey: \"_onAttach\",\n\t\t\tvalue: function _onAttach() {\n\t\t\t\tvar $title = this._$mount.find(\"> h1\");\n\t\t\t\t$title.text(\"\");\n\t\n\t\t\t\tvar list = new _list.ChatListComponent(this._server, this._users, this._chat);\n\t\t\t\tlist.attach(this._$mount);\n\t\t\t\tthis.children.push(list);\n\t\n\t\t\t\tvar form = new _form.ChatFormComponent(this._users, this._chat);\n\t\t\t\tform.attach(this._$mount);\n\t\t\t\tthis.children.push(form);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn ChatComponent;\n\t}(_component.ComponentBase);\n\t\n\tvar component = void 0;\n\ttry {\n\t\tcomponent = new ChatComponent(_services.server, _services.usersStore, _services.chatStore);\n\t\tcomponent.attach((0, _jquery2.default)(\"section.chat\"));\n\t} catch (e) {\n\t\tconsole.error(e);\n\t\tif (component) component.detach();\n\t} finally {\n\t\tif (false) {\n\t\t\tmodule.hot.accept();\n\t\t\tmodule.hot.dispose(function () {\n\t\t\t\treturn component && component.detach();\n\t\t\t});\n\t\t}\n\t}\n\n/***/ }),\n\n/***/ 422:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 424:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ChatListComponent = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _moment = __webpack_require__(425);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tvar _component = __webpack_require__(415);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar ChatListComponent = exports.ChatListComponent = function (_ElementComponent) {\n\t\t_inherits(ChatListComponent, _ElementComponent);\n\t\n\t\tfunction ChatListComponent(server, usersStore, chatStore) {\n\t\t\t_classCallCheck(this, ChatListComponent);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (ChatListComponent.__proto__ || Object.getPrototypeOf(ChatListComponent)).call(this, \"ul\"));\n\t\n\t\t\t_this._server = server;\n\t\t\t_this._users = usersStore;\n\t\t\t_this._chat = chatStore;\n\t\t\t_this.$element.addClass(\"chat-messages\");\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(ChatListComponent, [{\n\t\t\tkey: \"_onAttach\",\n\t\t\tvalue: function _onAttach() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\t_rxjs.Observable.merge(this._chat.messages$.map(chatMessageFactory), this._users.state$.map(userActionFactory), this._server.status$.map(serverStatusFactory)).filter(function (m) {\n\t\t\t\t\treturn m;\n\t\t\t\t}).compSubscribe(this, function ($newElement) {\n\t\t\t\t\t_this2.$element.append($newElement);\n\t\t\t\t\t_this2.$element[0].scrollTop = _this2.$element[0].scrollHeight;\n\t\t\t\t});\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn ChatListComponent;\n\t}(_component.ElementComponent);\n\t\n\tfunction serverStatusFactory(_ref) {\n\t\tvar isConnected = _ref.isConnected,\n\t\t    isReconnecting = _ref.isReconnecting,\n\t\t    attempt = _ref.attempt;\n\t\n\t\tvar statusMessage = null;\n\t\tif (isConnected) statusMessage = \"connected\";else if (isReconnecting) statusMessage = \"reconnecting (attempt \" + attempt + \")\";else status = \"gg disconnected\";\n\t\n\t\tif (statusMessage == null) return null;\n\t\n\t\treturn (0, _jquery2.default)(\"<li class=\\\"server-status\\\" />\").append([(0, _jquery2.default)(\"<span class=\\\"author\\\" />\").text(\"system\"), (0, _jquery2.default)(\"<span class=\\\"message\\\" />\").text(statusMessage), (0, _jquery2.default)(\"<time />\").text((0, _moment2.default)().format(\"h:mm:ss a\"))]);\n\t}\n\t\n\tfunction userActionFactory(_ref2) {\n\t\tvar type = _ref2.type,\n\t\t    user = _ref2.user;\n\t\n\t\tif (type !== \"add\" && type !== \"remove\") return null;\n\t\n\t\treturn (0, _jquery2.default)(\"<li class=\\\"user-action \" + type + \"\\\" />\").append([(0, _jquery2.default)(\"<span class=\\\"author\\\" />\").text(user.name).css(\"color\", user.color), (0, _jquery2.default)(\"<span class=\\\"message\\\" />\").text(type === \"add\" ? \"joined chatroom\" : \"left chatroom\"), (0, _jquery2.default)(\"<time />\").text((0, _moment2.default)().format(\"h:mm:ss a\"))]);\n\t}\n\t\n\tfunction chatMessageFactory(_ref3) {\n\t\tvar user = _ref3.user,\n\t\t    message = _ref3.message,\n\t\t    type = _ref3.type,\n\t\t    time = _ref3.time;\n\t\n\t\treturn (0, _jquery2.default)(\"<li class=\\\"message \" + type + \"\\\" />\").data(\"user\", user.name).append([(0, _jquery2.default)(\"<span class=\\\"author\\\" />\").text(user.name).css(\"color\", user.color), (0, _jquery2.default)(\"<span class=\\\"message\\\" />\").text(message), (0, _jquery2.default)(\"<time />\").text((0, _moment2.default)(time).format(\"h:mm:ss a\"))]);\n\t}\n\n/***/ }),\n\n/***/ 542:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ChatFormComponent = undefined;\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tvar _component = __webpack_require__(415);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar ChatFormComponent = exports.ChatFormComponent = function (_ElementComponent) {\n\t\t_inherits(ChatFormComponent, _ElementComponent);\n\t\n\t\tfunction ChatFormComponent(usersStore, chatStore) {\n\t\t\t_classCallCheck(this, ChatFormComponent);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (ChatFormComponent.__proto__ || Object.getPrototypeOf(ChatFormComponent)).call(this, \"div\"));\n\t\n\t\t\t_this._users = usersStore;\n\t\t\t_this._chat = chatStore;\n\t\t\t_this.$element.addClass(\"chat-form\");\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(ChatFormComponent, [{\n\t\t\tkey: \"_onAttach\",\n\t\t\tvalue: function _onAttach() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tthis._$error = (0, _jquery2.default)(\"<div class=\\\"chat-error\\\" />\").appendTo(this.$element);\n\t\t\t\tthis._$input = (0, _jquery2.default)(\"<input type=\\\"text\\\" class=\\\"chat-input\\\" />\").appendTo(this.$element);\n\t\n\t\t\t\tthis._users.currentUser$.compSubscribe(this, function (user) {\n\t\t\t\t\t_this2._$input.attr(\"placeholder\", user.isLoggedIn ? \"\" : \"Enter a Username\");\n\t\t\t\t});\n\t\n\t\t\t\t_rxjs.Observable.fromEvent(this._$input, \"keydown\"\n\t\t\t\t// Get Value\n\t\t\t\t).filter(function (e) {\n\t\t\t\t\treturn e.keyCode === 13;\n\t\t\t\t} /* keycode for enter */).do(function (e) {\n\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t}).map(function (e) {\n\t\t\t\t\treturn e.target.value.trim();\n\t\t\t\t}).filter(function (e) {\n\t\t\t\t\treturn e.length;\n\t\t\t\t}\n\t\n\t\t\t\t// Login or send message\n\t\t\t\t).withLatestFrom(this._users.currentUser$).flatMap(function (_ref) {\n\t\t\t\t\tvar _ref2 = _slicedToArray(_ref, 2),\n\t\t\t\t\t    value = _ref2[0],\n\t\t\t\t\t    user = _ref2[1];\n\t\n\t\t\t\t\treturn user.isLoggedIn ? _this2._sendMessage$(value) : _this2._login$(value);\n\t\t\t\t}\n\t\n\t\t\t\t// Display Message\n\t\t\t\t).compSubscribe(this, function (response) {\n\t\t\t\t\tif (response && response.error) _this2._$error.show().text(response.error.message);else _this2._$error.hide();\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_sendMessage$\",\n\t\t\tvalue: function _sendMessage$(message) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\treturn this._chat.sendMessage$(message).catchWrap().do(function () {\n\t\t\t\t\treturn _this3._$input.val(\"\");\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_login$\",\n\t\t\tvalue: function _login$(username) {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\tthis._$input.attr(\"disabled\", \"disabled\");\n\t\t\t\treturn this._users.login$(username).catchWrap().do(function () {\n\t\t\t\t\treturn _this4._$input.val(\"\");\n\t\t\t\t}).finally(function () {\n\t\t\t\t\t_this4._$input.attr(\"disabled\", null);\n\t\t\t\t\t_this4._$input.focus();\n\t\t\t\t});\n\t\t\t}\n\t\t}]);\n\n\t\treturn ChatFormComponent;\n\t}(_component.ElementComponent);\n\n/***/ }),\n\n/***/ 543:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _component = __webpack_require__(415);\n\t\n\t__webpack_require__(544);\n\t\n\tvar _list = __webpack_require__(546);\n\t\n\tvar _toolbar = __webpack_require__(548);\n\t\n\tvar _contextMenu = __webpack_require__(549);\n\t\n\tvar _chrome = __webpack_require__(550);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlaylistComponent = function (_ComponentBase) {\n\t\t_inherits(PlaylistComponent, _ComponentBase);\n\t\n\t\tfunction PlaylistComponent() {\n\t\t\t_classCallCheck(this, PlaylistComponent);\n\t\n\t\t\treturn _possibleConstructorReturn(this, (PlaylistComponent.__proto__ || Object.getPrototypeOf(PlaylistComponent)).call(this));\n\t\t}\n\t\n\t\t_createClass(PlaylistComponent, [{\n\t\t\tkey: \"_onAttach\",\n\t\t\tvalue: function _onAttach() {\n\t\t\t\tvar $title = this._$mount.find(\"> h1\");\n\t\t\t\t$title.text(\"Playlist\");\n\t\n\t\t\t\tvar toolbar = new _toolbar.PlaylistToolbarComponent();\n\t\t\t\ttoolbar.attach(this._$mount);\n\t\n\t\t\t\tthis._$chrome = (0, _jquery2.default)(\"<div class=\\\"chrome\\\" />\").appendTo(this._$mount);\n\t\t\t\tthis._$scrollArea = (0, _jquery2.default)(\"<div class=\\\"scroll-area\\\" />\").appendTo(this._$chrome);\n\t\n\t\t\t\tvar list = new _list.PlaylistListComponent();\n\t\t\t\tlist.attach(this._$scrollArea);\n\t\n\t\t\t\tvar contextMenu = new _contextMenu.PlaylistContextMenuComponent();\n\t\t\t\tcontextMenu.attach(this._$scrollArea);\n\t\n\t\t\t\tvar chrome = new _chrome.PlaylistChromeComponent();\n\t\t\t\tchrome.attach(this._$chrome);\n\t\n\t\t\t\tthis.children.push(toolbar, list, contextMenu, chrome);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_onDetach\",\n\t\t\tvalue: function _onDetach() {\n\t\t\t\tthis._$chrome.remove();\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn PlaylistComponent;\n\t}(_component.ComponentBase);\n\t\n\tvar component = void 0;\n\ttry {\n\t\tcomponent = new PlaylistComponent();\n\t\tcomponent.attach((0, _jquery2.default)(\"section.playlist\"));\n\t} catch (e) {\n\t\tconsole.error(e);\n\t\tif (component) component.detach();\n\t} finally {\n\t\tif (false) {\n\t\t\tmodule.hot.accept();\n\t\t\tmodule.hot.dispose(function () {\n\t\t\t\treturn component && component.detach();\n\t\t\t});\n\t\t}\n\t}\n\n/***/ }),\n\n/***/ 544:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 546:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.PlaylistListComponent = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _component = __webpack_require__(415);\n\t\n\tvar _sort = __webpack_require__(547);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlaylistListComponent = exports.PlaylistListComponent = function (_ElementComponent) {\n\t\t_inherits(PlaylistListComponent, _ElementComponent);\n\t\n\t\tfunction PlaylistListComponent() {\n\t\t\t_classCallCheck(this, PlaylistListComponent);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (PlaylistListComponent.__proto__ || Object.getPrototypeOf(PlaylistListComponent)).call(this, \"ul\"));\n\t\n\t\t\t_this.$element.addClass(\"playlist-list\");\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(PlaylistListComponent, [{\n\t\t\tkey: \"_onAttach\",\n\t\t\tvalue: function _onAttach() {\n\t\t\t\tvar sort = new _sort.PlaylistSortComponent();\n\t\t\t\tsort.attach(this._$mount);\n\t\t\t\tthis.children.push(sort);\n\t\t\t}\n\t\t}]);\n\n\t\treturn PlaylistListComponent;\n\t}(_component.ElementComponent);\n\n/***/ }),\n\n/***/ 547:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.PlaylistSortComponent = undefined;\n\t\n\tvar _component = __webpack_require__(415);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlaylistSortComponent = exports.PlaylistSortComponent = function (_ComponentBase) {\n\t\t_inherits(PlaylistSortComponent, _ComponentBase);\n\t\n\t\tfunction PlaylistSortComponent() {\n\t\t\t_classCallCheck(this, PlaylistSortComponent);\n\t\n\t\t\treturn _possibleConstructorReturn(this, (PlaylistSortComponent.__proto__ || Object.getPrototypeOf(PlaylistSortComponent)).call(this));\n\t\t}\n\t\n\t\treturn PlaylistSortComponent;\n\t}(_component.ComponentBase);\n\n/***/ }),\n\n/***/ 548:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.PlaylistToolbarComponent = undefined;\n\t\n\tvar _component = __webpack_require__(415);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlaylistToolbarComponent = exports.PlaylistToolbarComponent = function (_ElementComponent) {\n\t\t_inherits(PlaylistToolbarComponent, _ElementComponent);\n\t\n\t\tfunction PlaylistToolbarComponent() {\n\t\t\t_classCallCheck(this, PlaylistToolbarComponent);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (PlaylistToolbarComponent.__proto__ || Object.getPrototypeOf(PlaylistToolbarComponent)).call(this, \"div\"));\n\t\n\t\t\t_this.$element.addClass(\"toolbar\");\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn PlaylistToolbarComponent;\n\t}(_component.ElementComponent);\n\n/***/ }),\n\n/***/ 549:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.PlaylistContextMenuComponent = undefined;\n\t\n\tvar _component = __webpack_require__(415);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlaylistContextMenuComponent = exports.PlaylistContextMenuComponent = function (_ElementComponent) {\n\t\t_inherits(PlaylistContextMenuComponent, _ElementComponent);\n\t\n\t\tfunction PlaylistContextMenuComponent() {\n\t\t\t_classCallCheck(this, PlaylistContextMenuComponent);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (PlaylistContextMenuComponent.__proto__ || Object.getPrototypeOf(PlaylistContextMenuComponent)).call(this, \"div\"));\n\t\n\t\t\t_this.$element.addClass(\"context-menu\");\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn PlaylistContextMenuComponent;\n\t}(_component.ElementComponent);\n\n/***/ }),\n\n/***/ 550:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.PlaylistChromeComponent = undefined;\n\t\n\tvar _component = __webpack_require__(415);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlaylistChromeComponent = exports.PlaylistChromeComponent = function (_ComponentBase) {\n\t\t_inherits(PlaylistChromeComponent, _ComponentBase);\n\t\n\t\tfunction PlaylistChromeComponent() {\n\t\t\t_classCallCheck(this, PlaylistChromeComponent);\n\t\n\t\t\treturn _possibleConstructorReturn(this, (PlaylistChromeComponent.__proto__ || Object.getPrototypeOf(PlaylistChromeComponent)).call(this));\n\t\t}\n\t\n\t\treturn PlaylistChromeComponent;\n\t}(_component.ComponentBase);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// application.js","import $ from \"jquery\";\n\nimport \"shared/operators\";\n\nimport \"./application.scss\";\n\nimport * as services from \"./services\";\n\n// --------------------------------------\n// PLAYGROUND\nservices.server\n\t.emitAction$(\"login\", {username: \"foo\", password: \"bar\"})\n\t.subscribe(user => {\n\t\tconsole.log(\"We're logged in: \" + user);\n\t}, error => {\n\t\tconsole.error(error);\n\t});\n// --------------------------------------\n// Auth\nconst $html = $(\"html\");\nservices.usersStore.currentUser$.subscribe(user => {\n\tif (user.isLoggedIn) {\n\t\t$html.removeClass(\"not-logged-in\");\n\t\t$html.addClass(\"logged-in\");\n\t} else {\n\t\t$html.addClass(\"not-logged-in\");\n\t\t$html.removeClass(\"logged-in\");\n\t}\n});\n\n// --------------------------------------\n// Components\nrequire(\"./components/player/player\");\nrequire(\"./components/users/users\");\nrequire(\"./components/chat/chat\");\nrequire(\"./components/playlist/playlist\");\n\n// --------------------------------------\n// Bootstrap\nservices.socket.connect();\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application.js","import {Observable} from \"rxjs\";\n\nObservable.prototype.safeSubscribe = function(next, error, complete) {\n\tconst subscription = this.subscribe(\n\t\titem => {\n\t\t\ttry {\n\t\t\t\tnext(item);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e.stack || e);\n\t\t\t\tsubscription.unsubscribe();\n\t\t\t}\n\t\t}, error, complete);\n\n\treturn subscription;\n};\n\nObservable.prototype.catchWrap = function() {\n\treturn this.catch(error => Observable.of({error: error}));\n};\n\n\n// WEBPACK FOOTER //\n// ./src/shared/operators.js","import io from \"socket.io-client\";\n\nimport {ObservableSocket} from \"shared/observable-socket\";\nimport {UsersStore} from \"./stores/users\";\nimport {ChatStore} from \"./stores/chat\";\n\nexport const socket = io({ autoConnect: false });\nexport const server = new ObservableSocket(socket);\n\nexport const usersStore = new UsersStore(server);\nexport const chatStore = new ChatStore(server, usersStore);\n\n\n// WEBPACK FOOTER //\n// ./src/client/services.js","import {Observable, ReplaySubject} from \"rxjs\";\n\nexport function clientMessage(message) {\n\tconst error = new Error(message);\n\terror.clientMessage = message;\n\treturn error;\n}\n\nexport function fail(message) {\n\treturn Observable.throw({clientMessage: message});\n}\n\nlet successObservable = Observable.empty();\nexport function success() {\n\treturn successObservable;\n}\n\nexport class ObservableSocket {\n\tget isConnected() { return this._state.isConnected; }\n\tget isReconnecting() { return this._state.isReconnecting; }\n\tget isTotallyDead() { return !this.isConnected && !this.isReconnecting; }\n\n\tconstructor(socket) {\n\t\tthis._socket = socket;\n\t\tthis._state = {};\n\t\tthis._actionCallbacks = {};\n\t\tthis._requests = {};\n\t\tthis._nextRequestId = 0;\n\n\t\t// socket.on(\"connect\", () => this._state = {isConnected: true});\n\t\t// socket.on(\"disconnect\", () => this._state = {isConnected: false});\n\t\tthis.status$ = Observable.merge(\n\t\t\tthis.on$(\"connect\").map(() => ({ isConnected: true })),\n\t\t\tthis.on$(\"disconnect\").map(() => ({ isConnected: false })),\n\t\t\tthis.on$(\"reconnecting\").map(attempt => ({ isConnected: false, isReconnecting: true, attempt })),\n\t\t\tthis.on$(\"reconnect_fail\").map(() => ({ isConnected: false, isReconnecting: false})))\n\t\t\t.publishReplay(1)\n\t\t\t.refCount();\n\n\t\tthis.status$.subscribe(state => this._state = state);\n\t}\n\n\t// ---------------------\n\t// Basic Wrappers\n\ton$(event) {\n\t\treturn Observable.fromEvent(this._socket, event);\n\t}\n\n\ton(event, callback) {\n\t\tthis._socket.on(event, callback);\n\t}\n\n\toff(event, callback) {\n\t\tthis._socket.off(event, callback);\n\t}\n\n\temit(event, arg) {\n\t\tthis._socket.emit(event, arg);\n\t}\n\n\t// ---------------------\n\t// Emit (Client Side)\n\temitAction$(action, arg) {\n\t\tconst id = this._nextRequestId++;\n\t\tthis._registerCallbacks(action);\n\n\t\tconst subject = this._requests[id] = new ReplaySubject(1);\n\t\tthis._socket.emit(action, arg, id);\n\t\treturn subject;\n\t}\n\n\t_registerCallbacks(action) {\n\t\tif (this._actionCallbacks.hasOwnProperty(action))\n\t\t\treturn;\n\n\t\tthis._socket.on(action, (arg, id) => {\n\t\t\tconst request = this._popRequest(id);\n\t\t\tif (!request)\n\t\t\t\treturn;\n\n\t\t\trequest.next(arg);\n\t\t\trequest.complete();\n\t\t});\n\n\t\tthis._socket.on(`${action}:fail`, (arg, id) => {\n\t\t\tconst request = this._popRequest(id);\n\t\t\tif (!request) \n\t\t\t\treturn;\n\n\t\t\trequest.error(arg);\n\t\t});\n\n\t\tthis._actionCallbacks[action] = true;\n\t}\n\n\t_popRequest(id) {\n\t\tif (!this._requests.hasOwnProperty(id)) {\n\t\t\tconsole.error(`Event with ${id} was returned twice, or the server did not send back an ID`);\n\t\t}\n\n\t\tconst request = this._requests[id];\n\t\tdelete this._requests[id];\n\t\treturn request;\n\t}\n\n\t// ---------------------\n\t// On (Server Side)\n\tonAction(action, callback) {\n\t\tthis._socket.on(action, (arg, requestId) => {\n\t\t\ttry {\n\t\t\t\tconst value = callback(arg);\n\t\t\t\tif (!value) {\n\t\t\t\t\tthis._socket.emit(action, null, requestId);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (typeof(value.subscribe) !== \"function\") {\n\t\t\t\t\tthis._socket.emit(action, value, requestId);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet hasValue = false;\n\t\t\t\tvalue.subscribe({\n\t\t\t\t\tnext: (item) => {\n\t\t\t\t\t\tif (hasValue)\n\t\t\t\t\t\t\tthrow new Error(`Action ${action} produced more than one value`);\n\n\t\t\t\t\t\tthis._socket.emit(action, item, requestId);\n\t\t\t\t\t\thasValue = true;\n\t\t\t\t\t},\n\n\t\t\t\t\terror: (error) => {\n\t\t\t\t\t\tthis._emitError(action, requestId, error);\n\t\t\t\t\t\tconsole.error(error.stack || error);\n\t\t\t\t\t},\n\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tif (!hasValue)\n\t\t\t\t\t\t\tthis._socket.emit(action, null, requestId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tcatch (error) {\n\t\t\t\tif (typeof(requestId) !== \"undefined\")\n\t\t\t\t\tthis._emitError(action, requestId, error);\n\n\t\t\t\tconsole.error(error.stack || error);\n\t\t\t}\n\t\t});\n\t}\n\n\tonActions(actions) {\n\t\tfor (let action in actions) {\n\t\t\tif (!actions.hasOwnProperty(action))\n\t\t\t\tcontinue;\n\n\t\t\tthis.onAction(action, actions[action]);\n\t\t}\n\t}\n\n\t_emitError(action, id, error) {\n\t\tconst message = (error && error.clientMessage) || \"Fatal Error\";\n\t\tthis._socket.emit(`${action}:fail`, {message}, id);\n\t}\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/observable-socket.js","import _ from \"lodash\";\nimport {Observable} from \"rxjs\";\nimport {validateLogin} from \"shared/validation/users\";\n\nexport class UsersStore {\n\tget currentUser() { return this._currentUser; }\n\tget isLoggedIn() { return this._currentUser && this._currentUser.isLoggedIn; }\n\n\tconstructor(server) {\n\t\tthis._server = server;\n\n\t\t// Users List\n\t\tconst defaultStore = {users: []};\n\t\tconst events$ = Observable.merge(\n\t\t\tthis._server.on$(\"users:list\").map(opList),\n\t\t\tthis._server.on$(\"users:added\").map(opAdd),\n\t\t\tthis._server.on$(\"users:removed\").map(opRemove));\n\n\t\tthis.state$ = events$\n\t\t\t\t.scan(({state}, op) => op(state), {state: defaultStore})\n\t\t\t\t.publishReplay(1);\n\n\t\tthis.state$.connect();\n\n\t\t// Auth\n\t\tthis.currentUser$ = Observable.merge(\n\t\t\tthis._server.on$(\"auth:login\"),\n\t\t\tthis._server.on$(\"auth:logout\").mapTo({}))\n\t\t\t.startWith({})\n\t\t\t.publishReplay(1)\n\t\t\t.refCount();\n\n\t\tthis.currentUser$.subscribe(user => this._currentUser = user);\n\n\t\t// Bootstrap\n\t\tthis._server.on(\"connect\", () => {\n\t\t\tthis._server.emit(\"users:list\");\n\n\t\t\tif (!this.isLoggedIn)\n\t\t\t\treturn;\n\n\t\t\tthis.login$(this._currentUser.name).subscribe(\n\t\t\t\t\tuser => console.log(`Logged in again as ${user.name}`),\n\t\t\t\t\terror => alert(`Could not log back in ${error.message || \"Unknown Error\"}`));\n\t\t});\n\t}\n\n\tlogin$(name) {\n\t\tconst validator = validateLogin(name);\n\t\tif (validator.hasErrors)\n\t\t\treturn Observable.throw({message: validator.message});\n\n\t\treturn this._server.emitAction$(\"auth:login\", {name});\n\t}\n\n\tlogout$() {\n\t\treturn this._server.emitAction$(\"auth:logout\");\n\t}\n}\n\nfunction opList(users) {\n\treturn state => {\n\t\tstate.users = users;\n\t\tstate.users.sort((l, r) => l.name.localeCompare(r.name));\n\t\treturn {\n\t\t\ttype: \"list\",\n\t\t\tstate: state\n\t\t};\n\t};\n}\n\nfunction opAdd(user) {\n\treturn state => {\n\t\tlet insertIndex = _.findIndex(state.users,\n\t\t\tu => u.name.localeCompare(user.name) > 0);\n\n\t\tif (insertIndex === 1)\n\t\t\tinsertIndex = state.users.length;\n\n\t\tstate.users.splice(insertIndex, 0, user);\n\t\treturn {\n\t\t\ttype: \"add\",\n\t\t\tuser: user,\n\t\t\tstate: state\n\t\t};\n\t};\n}\n\nfunction opRemove(user) {\n\treturn state => {\n\t\tconst index = _.findIndex(state.users, { name: user.name });\n\t\tif (index !== -1) {\n\t\t\tstate.users.splice(index, 1);\n\t\t}\n\t\treturn {\n\t\t\ttype: \"remove\",\n\t\t\tuser: user,\n\t\t\tstate: state\n\t\t};\n\t};\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/stores/users.js","import {Validator} from \"../validator\";\n\nexport let USERNAME_REGEX = /^[\\w\\d_-]+$/;\n\nexport function validateLogin(username) {\n\tconst validator = new Validator();\n\n\tif (username.length >= 10)\n\t\tvalidator.error(\"Username must be fewer than 10 characters\");\n\n\tif (!USERNAME_REGEX.test(username))\n\t\tvalidator.error(\"Username can only contain numbers, digits, underscores and dashes\");\n\n\treturn validator;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/validation/users.js","import {Observable} from \"rxjs\";\n\nexport class Validator {\n\tget isValid() { return !this._errors.length; }\n\tget errors() { return this._errors; }\n\tget message() { return this._errors.join(\", \"); }\n\n\tconstructor() {\n\t\tthis._errors = [];\n\t}\n\n\terror(message) {\n\t\tthis._errors.push(message);\n\t}\n\n\ttoObject() {\n\t\tif (this.isValid)\n\t\t\treturn {};\n\n\t\treturn {\n\t\t\terrors: this._errors,\n\t\t\tmessage: this.message\n\t\t};\n\t}\n\n\tthrow$() {\n\t\treturn Observable.throw({clientMessage: this.message});\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/validator.js","import {Observable} from \"rxjs\";\n\nimport {validateSendMessage} from \"shared/validation/chat\";\n\nexport class ChatStore {\n\tconstructor(server, userStore) {\n\t\tthis._server = server;\n\t\tthis._users = userStore;\n\n\t\tthis.messages$ = Observable.merge(\n\t\t\tserver.on$(\"chat:list\").flatMap(list => Observable.from(list)),\n\t\t\tserver.on$(\"chat:added\"))\n\t\t\t.publishReplay(100);\n\n\t\tthis.messages$.connect();\n\n\t\tserver.on$(\"connect\")\n\t\t\t.first()\n\t\t\t.subscribe(() => server.emit(\"chat:list\"));\n\t}\n\n\tsendMessage$(message, type = \"normal\") {\n\t\tconst validator = validateSendMessage(this._users.currentUser, message, type);\n\t\tif (!validator.isValid)\n\t\t\treturn Observable.throw({message: validator.message});\n\n\t\treturn this._server.emitAction$(\"chat:add\", {message, type});\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/stores/chat.js","import _ from \"lodash\";\nimport {Validator} from \"../validator\";\n\nexport let MESSAGE_TYPES = [\"normal\"];\n\nexport function validateSendMessage(user, message, type) {\n\tconst validator = new Validator();\n\n\tif (message.length > 100)\n\t\tvalidator.error(\"Message must be smaller than 100 characters\");\n\n\tif (message.trim().length === 0)\n\t\tvalidator.error(\"Message cannot be empty\");\n\n\tif (!_.includes(MESSAGE_TYPES, type))\n\t\tvalidator.error(`Invalid message type ${type}`);\n\n\treturn validator;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/validation/chat.js","import $ from \"jquery\";\nimport {ElementComponent} from \"../../lib/component\";\n\nimport \"./player.scss\";\n\nclass PlayerComponent extends ElementComponent {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t_onAttach() {\n\t\tconst $title = this._$mount.find(\"h1\");\n\t\t$title.text(\"Video player\");\n\n\t\tconst $player = this._$mount.find(\"div\");\n\t\t$player.html('<iframe src=\"https://www60.playercdn.net/86/0/aZiMpb4G-v4JxBZPkmPuSQ/1497124563/170514/997ddFakys8jLEK.mp4\" width=\"1000\" height=\"500\" frameborder=\"0\" allowfullscreen></iframe>');\n\t}\n}\n\nlet component;\ntry {\n\tcomponent = new PlayerComponent();\n\tcomponent.attach($(\"section.player\"));\n} catch (e) {\n\tconsole.error(e);\n\tif (component)\n\t\tcomponent.detach();\n}\nfinally {\n\tif (module.hot) {\n\t\tmodule.hot.accept();\n\t\tmodule.hot.dispose(() => component && component.detach());\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/player/player.js","import $ from \"jquery\";\n\nimport {Observable} from \"rxjs\";\n\nObservable.prototype.compSubscribe = function(component, ...args) {\n\tlet subscription = this.safeSubscribe(...args);\n\tcomponent._onDetachHandlers.push(() => subscription.unsubscribe());\n\treturn subscription;\n};\n\nexport class ComponentBase {\n\tattach($mount) {\n\t\tthis._$mount = $mount;\n\t\tthis._onDetachHandlers = [];\n\t\tthis.children = [];\n\t\tthis._onAttach();\n\t}\n\n\tdetach() {\n\t\tthis._onDetach();\n\n\t\tfor(let handler of this._onDetachHandlers)\n\t\t\thandler();\n\n\t\tfor(let child of this.children)\n\t\t\tchild.detach();\n\n\t\tthis._onDetachHandlers = [];\n\t\tthis.children = [];\n\t}\n\n\t_onAttach() {\n\n\t}\n\n\t_onDetach() {\n\n\t}\n}\n\nexport class ElementComponent extends ComponentBase {\n\tget $element() { return this._$element; }\n\n\tconstructor(elementType = \"div\") {\n\t\tsuper();\n\t\tthis._$element = $(`<${elementType}>`).data(\"component\", this);\n\t}\n\n\tattach($mount) {\n\t\tsuper.attach($mount);\n\t\tthis.$element.appendTo(this._$mount);\n\t}\n\n\tdetach() {\n\t\tsuper.detach();\n\t\tthis.$element.remove();\n\t}\n\n\t_setClass(className, isOn) {\n\t\tif (isOn)\n\t\t\tthis._$element.addClass(className);\n\t\telse\n\t\t\tthis._$element.removeClass(className);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/lib/component.js","import $ from \"jquery\";\nimport {ElementComponent} from \"../../lib/component\";\nimport {usersStore} from \"../../services\";\n\nimport \"./users.scss\";\n\nclass UsersComponent extends ElementComponent {\n\tconstructor() {\n\t\tsuper(\"ul\");\n\t\tthis.$element.addClass(\"users\");\n\t\tthis._users = usersStore;\n\t}\n\t_onAttach() {\n\t\tconst $title = this._$mount.find(\"> h1\");\n\n\t\tthis._users.state$\n\t\t\t.map(action => action.state.users)\n\t\t\t.compSubscribe(this, users => {\n\t\t\t\t$title.text(`${users.length} user${users.length != 1 ? \"s\" : \"\"}`);\n\n\t\t\t\tthis.$element.empty();\n\t\t\t\tfor (let user of users) {\n\t\t\t\t\tconst $name = $(`<span class=\"name\" />`).text(user.name).css(\"color\", user.color);\n\t\t\t\t\tconst $userElement = $(`<li />`).append($name);\n\t\t\t\t\tthis.$element.append($userElement);\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n\nlet component;\ntry {\n\tcomponent = new UsersComponent(usersStore);\n\tcomponent.attach($(\"section.users\"));\n} catch (e) {\n\tconsole.error(e);\n\tif (component)\n\t\tcomponent.detach();\n}\nfinally {\n\tif (module.hot) {\n\t\tmodule.hot.accept();\n\t\tmodule.hot.dispose(() => component && component.detach());\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/users/users.js","import $ from \"jquery\";\nimport {ComponentBase} from \"../../lib/component\";\n\nimport \"./chat.scss\";\n\nimport {usersStore, chatStore, server} from \"../../services\";\n\nimport {ChatListComponent} from \"./list\";\nimport {ChatFormComponent} from \"./form\";\n\nclass ChatComponent extends ComponentBase {\n\tconstructor(server, usersStore, chatStore) {\n\t\tsuper();\n\t\tthis._server = server;\n\t\tthis._users = usersStore;\n\t\tthis._chat = chatStore;\n\t}\n\t_onAttach() {\n\t\tconst $title = this._$mount.find(\"> h1\");\n\t\t$title.text(\"\");\n\n\t\tconst list = new ChatListComponent(this._server, this._users, this._chat);\n\t\tlist.attach(this._$mount);\n\t\tthis.children.push(list);\n\n\t\tconst form = new ChatFormComponent(this._users, this._chat);\n\t\tform.attach(this._$mount);\n\t\tthis.children.push(form);\n\t}\n}\n\nlet component;\ntry {\n\tcomponent = new ChatComponent(server, usersStore, chatStore);\n\tcomponent.attach($(\"section.chat\"));\n} catch (e) {\n\tconsole.error(e);\n\tif (component)\n\t\tcomponent.detach();\n}\nfinally {\n\tif (module.hot) {\n\t\tmodule.hot.accept();\n\t\tmodule.hot.dispose(() => component && component.detach());\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/chat/chat.js","import $ from \"jquery\";\nimport moment from \"moment\";\nimport {Observable} from \"rxjs\";\n\nimport {ElementComponent} from \"../../lib/component\";\n\nexport class ChatListComponent extends ElementComponent {\n\tconstructor(server, usersStore, chatStore) {\n\t\tsuper(\"ul\");\n\t\tthis._server = server;\n\t\tthis._users = usersStore;\n\t\tthis._chat = chatStore;\n\t\tthis.$element.addClass(\"chat-messages\");\n\t}\n\n\t_onAttach() {\n\t\tObservable.merge(\n\t\t\tthis._chat.messages$.map(chatMessageFactory),\n\t\t\tthis._users.state$.map(userActionFactory),\n\t\t\tthis._server.status$.map(serverStatusFactory))\n\t\t\t.filter(m => m)\n\t\t\t.compSubscribe(this, $newElement => {\n\t\t\t\tthis.$element.append($newElement);\n\t\t\t\tthis.$element[0].scrollTop = this.$element[0].scrollHeight;\n\t\t\t});\n\t}\n}\n\nfunction serverStatusFactory ({isConnected, isReconnecting, attempt}) {\n\tlet statusMessage = null;\n\tif (isConnected) statusMessage = \"connected\";\n\telse if (isReconnecting) statusMessage = `reconnecting (attempt ${attempt})`;\n\telse status = \"gg disconnected\";\n\n\tif (statusMessage == null)\n\t\treturn null;\n\n\treturn $(`<li class=\"server-status\" />`).append([\n\t\t$(`<span class=\"author\" />`).text(\"system\"),\n\t\t$(`<span class=\"message\" />`).text(statusMessage),\n\t\t$(`<time />`).text(moment().format(\"h:mm:ss a\"))\n\t]);\n}\n\nfunction userActionFactory({type, user}) {\n\tif (type !== \"add\" && type !== \"remove\")\n\t\treturn null;\n\n\treturn $(`<li class=\"user-action ${type}\" />`).append([\n\t\t$(`<span class=\"author\" />`).text(user.name).css(\"color\", user.color),\n\t\t$(`<span class=\"message\" />`).text(type === \"add\" ? \"joined chatroom\" : \"left chatroom\"),\n\t\t$(`<time />`).text(moment().format(\"h:mm:ss a\"))\n\t]);\n}\n\nfunction chatMessageFactory({user, message, type, time}) {\n\treturn $(`<li class=\"message ${type}\" />`)\n\t\t.data(\"user\", user.name)\n\t\t.append([\n\t\t\t$(`<span class=\"author\" />`).text(user.name).css(\"color\", user.color),\n\t\t\t$(`<span class=\"message\" />`).text(message),\n\t\t\t$(`<time />`).text(moment(time).format(\"h:mm:ss a\"))\n\t\t]);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/chat/list.js","import $ from \"jquery\";\nimport {Observable} from \"rxjs\";\n\nimport {ElementComponent} from \"../../lib/component\";\n\nexport class ChatFormComponent extends ElementComponent {\n\tconstructor(usersStore, chatStore) {\n\t\tsuper(\"div\");\n\t\tthis._users = usersStore;\n\t\tthis._chat = chatStore;\n\t\tthis.$element.addClass(\"chat-form\");\n\t}\n\n\t_onAttach() {\n\t\tthis._$error = $(`<div class=\"chat-error\" />`).appendTo(this.$element);\n\t\tthis._$input = $(`<input type=\"text\" class=\"chat-input\" />`).appendTo(this.$element);\n\n\t\tthis._users.currentUser$.compSubscribe(this, user => {\n\t\t\tthis._$input.attr(\"placeholder\", user.isLoggedIn ? \"\" : \"Enter a Username\");\n\t\t});\n\n\t\tObservable.fromEvent(this._$input, \"keydown\")\n\t\t\t// Get Value\n\t\t\t.filter(e => e.keyCode === 13 /* keycode for enter */)\n\t\t\t.do(e => e.preventDefault())\n\t\t\t.map(e => e.target.value.trim())\n\t\t\t.filter(e => e.length)\n\n\t\t\t// Login or send message\n\t\t\t.withLatestFrom(this._users.currentUser$)\n\t\t\t.flatMap(([value, user]) => {\n\t\t\t\treturn user.isLoggedIn ? this._sendMessage$(value) : this._login$(value);\n\t\t\t})\n\n\t\t\t// Display Message\n\t\t\t.compSubscribe(this, response => {\n\t\t\t\tif (response && response.error)\n\t\t\t\t\tthis._$error.show().text(response.error.message);\n\t\t\t\telse\n\t\t\t\t\tthis._$error.hide();\n\t\t\t});\n\t}\n\n\t_sendMessage$(message) {\n\t\treturn this._chat.sendMessage$(message).catchWrap()\n\t\t\t.do(() => this._$input.val(\"\"));\n\t}\n\n\t_login$(username) {\n\t\tthis._$input.attr(\"disabled\", \"disabled\");\n\t\treturn this._users.login$(username).catchWrap()\n\t\t\t.do(() => this._$input.val(\"\"))\n\t\t\t.finally(() => {\n\t\t\t\tthis._$input.attr(\"disabled\", null);\n\t\t\t\tthis._$input.focus();\n\t\t\t});\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/chat/form.js","import $ from \"jquery\";\nimport {ComponentBase} from \"../../lib/component\";\n\nimport \"./playlist.scss\";\n\nimport {PlaylistListComponent} from \"./list\";\nimport {PlaylistToolbarComponent} from \"./toolbar\";\nimport {PlaylistContextMenuComponent} from \"./context-menu\";\nimport {PlaylistChromeComponent} from \"./chrome\";\n\nclass PlaylistComponent extends ComponentBase {\n\tconstructor() {\n\t\tsuper();\n\t}\n\t\n\t_onAttach() {\n\t\tconst $title = this._$mount.find(\"> h1\");\n\t\t$title.text(\"Playlist\");\n\n\t\tconst toolbar = new PlaylistToolbarComponent();\n\t\ttoolbar.attach(this._$mount);\n\n\t\tthis._$chrome = $(`<div class=\"chrome\" />`).appendTo(this._$mount);\n\t\tthis._$scrollArea = $(`<div class=\"scroll-area\" />`).appendTo(this._$chrome);\n\n\t\tconst list = new PlaylistListComponent();\n\t\tlist.attach(this._$scrollArea);\n\n\t\tconst contextMenu = new PlaylistContextMenuComponent();\n\t\tcontextMenu.attach(this._$scrollArea);\n\n\t\tconst chrome = new PlaylistChromeComponent();\n\t\tchrome.attach(this._$chrome);\n\n\t\tthis.children.push(toolbar, list, contextMenu, chrome);\n\t}\n\n\t_onDetach() {\n\t\tthis._$chrome.remove();\n\t}\n}\n\nlet component;\ntry {\n\tcomponent = new PlaylistComponent();\n\tcomponent.attach($(\"section.playlist\"));\n} catch (e) {\n\tconsole.error(e);\n\tif (component)\n\t\tcomponent.detach();\n}\nfinally {\n\tif (module.hot) {\n\t\tmodule.hot.accept();\n\t\tmodule.hot.dispose(() => component && component.detach());\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/playlist/playlist.js","import {ElementComponent} from \"../../lib/component\";\n\nimport {PlaylistSortComponent} from \"./sort\";\n\nexport class PlaylistListComponent extends ElementComponent {\n\tconstructor() {\n\t\tsuper(\"ul\");\n\t\tthis.$element.addClass(\"playlist-list\");\n\t}\n\n\t_onAttach() {\n\t\tconst sort = new PlaylistSortComponent();\n\t\tsort.attach(this._$mount);\n\t\tthis.children.push(sort);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/playlist/list.js","import {ComponentBase} from \"../../lib/component\";\n\nexport class PlaylistSortComponent extends ComponentBase {\n\tconstructor() {\n\t\tsuper();\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/playlist/sort.js","import {ElementComponent} from \"../../lib/component\";\n\nexport class PlaylistToolbarComponent extends ElementComponent {\n\tconstructor() {\n\t\tsuper(\"div\");\n\t\tthis.$element.addClass(\"toolbar\");\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/playlist/toolbar.js","import {ElementComponent} from \"../../lib/component\";\n\nexport class PlaylistContextMenuComponent extends ElementComponent {\n\tconstructor() {\n\t\tsuper(\"div\");\n\t\tthis.$element.addClass(\"context-menu\");\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/playlist/context-menu.js","import {ComponentBase} from \"../../lib/component\";\n\nexport class PlaylistChromeComponent extends ComponentBase {\n\tconstructor() {\n\t\tsuper();\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/playlist/chrome.js"],"sourceRoot":""}